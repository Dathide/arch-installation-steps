ls /sys/firmware/efi/efivars
ip link
ping archlinux.org
timedatectl set-ntp true
# Download my scripts
pacman -Sy xclip git
git clone https://github.com/Dathide/archstuff
mv /root/archstuff/lc /bin/lc
# Can now copy any line of this file to clipboard with "lc #"
# Boot into Kubuntu live image and install and open gparted.
# 300MB partition, FAT32, Label: BOOT1
# 82000MB partition, BTRFS, Label: ARCH1
# Format and encrypt the root partition
cryptsetup -y -v luksFormat /dev/disk/by-label/ARCH1
# Enter desired password
cryptsetup open /dev/disk/by-label/ARCH1 cryptroot
mkfs.btrfs /dev/mapper/cryptroot
mount -o noatime,compress-force=zstd:6,space_cache=v2 /dev/mapper/cryptroot /mnt
# Create btrfs subvolumes in /mnt. Var must have its own subvolume for grub-btrfs to work.
btrfs su cr /mnt/@
btrfs su cr /mnt/@home
btrfs su cr /mnt/@var
btrfs su cr /mnt/@.snapshots
umount /mnt
mount -o noatime,compress-force=zstd:6,space_cache=v2,subvol=@ /dev/mapper/cryptroot /mnt
mkdir /mnt/{boot,home,var,.snapshots}
mount -o noatime,compress-force=zstd:6,space_cache=v2,subvol=@home /dev/mapper/cryptroot /mnt/home
mount -o noatime,compress-force=zstd:6,space_cache=v2,subvol=@var /dev/mapper/cryptroot /mnt/var
mount -o noatime,compress-force=zstd:6,space_cache=v2,subvol=@.snapshots /dev/mapper/cryptroot /mnt/.snapshots
mount /dev/disk/by-label/BOOT43 /mnt/boot
# Copy the following line with "lc (line number)"
pacstrap /mnt base linux linux-lts linux-firmware sudo nano amd-ucode btrfs-progs dhcpcd iwd iproute2 networkmanager network-manager-applet 
genfstab -U /mnt >> /mnt/etc/fstab
arch-chroot /mnt
ln -sf /usr/share/zoneinfo/America/Phoenix /etc/localtime
hwclock --systohc
nano /etc/locale.gen
# Uncomment en_US.UTF-8
locale-gen
nano /etc/locale.conf
# Set first line to LANG=en_US.UTF-8
nano /etc/hostname
# First line: linux-pc
nano /etc/hosts
# 127.0.0.1    localhost
# ::1        localhost
# 127.0.1.1    linux-pc.localdomain    linux-pc
nano /etc/mkinitcpio.conf
# Add "btrfs" to MODULES
# Add "keyboard" and "encrypt" in HOOKS separated by spaces
mkinitcpio -P
pacman -S grub grub-btrfs efibootmgr base-devel linux-headers wpa_supplicant dialog os-prober reflector git --needed
nano /etc/default/grub
# Uncomment GRUB_DISABLE_SUBMENU=y
# In GRUB_CMDLINE_LINUX_DEFAULT, add:
# cryptdevice=UUID=(device-UUID):cryptroot root=/dev/mapper/cryptroot
passwd
grub-install --target=x86_64-efi --efi-directory=/boot --bootloader-id=GRUB
grub-mkconfig -o /boot/grub/grub.cfg
nano /etc/environment
# Last line: EDITOR=nano
source /etc/environment
useradd -m -G users,wheel,uucp -s /bin/bash sapien
passwd sapien
visudo
# Uncomment wheel line
nano /etc/pacman.conf
# Uncomment the two multilib lines, ParallelDownloads = 3, and Color
pacman -S mtools dosfstools exfat-utils fuse-exfat f2fs-tools e2fsprogs ntfs-3g xfsprogs vi xorg xf86-video-amdgpu mesa lib32-mesa amdvlk lib32-amdvlk libva-mesa-driver lib32-libva-mesa-driver mesa-vdpau lib32-mesa-vdpau vkd3d lib32-vkd3d plasma sddm sddm-kcm firefox chromium steam ttf-liberation wqy-zenhei libreoffice compsize neofetch gimp konsole krusader kate snapper dolphin ark p7zip unarchiver lzop lrzip filelight gwenview kcolorchooser kompare qt5-imageformats kimageformats kipi-plugins kamera colord-kde grub-customizer tealdeer mkvtoolnix-gui vlc rust rclone kfind qbittorrent wget --needed
systemctl enable dhcpcd.service
systemctl enable NetworkManager.service
systemctl enable sddm.service
systemctl enable systemd-timesyncd
balooctl disable
exit
reboot
# If SDDM doesn't open, Ctrl Alt F2 to exit plasma into the tty shell. Ctrl Alt F1 to go back.
# Run following command if displays aren't oriented properly.
xrandr --output DisplayPort-1 --mode “2560x1440” --left-of “DisplayPort-0”
sudo compsize -x /
cd ~
git clone https://aur.archlinux.org/paru.git
cd paru
makepkg -si
cd ~
rm -rf paru
# Disable font sub-pixel rendering
# Download firefox config folder and place in home
# Symlink personal downloads folder to ~/Downloads
# KDE Settings > Shortcuts > Custom Shortcuts > Edit > New > Command/URL > Name: Set Monitor Profiles > Key: Scroll Lock > Command: Points to script that uses colormgr
# Custom shortcuts are stored in a text file at: ~/.config/khotkeysrc
# Firefox hardening: www.quippd.com/writing/2021/07/26/firefox-privacy-stop-hardening-love-strict-etp.html
# Firefox enable: gfx.webrenderall
# Run ss2xSteamScaling.sh
# To get meta key to open app launcher, Rclick app launcher, configure, set shortcut to Alt+F1
